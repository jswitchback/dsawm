<?php

/**
 * Implements hook_block_info().
 *
 * This hook declares what blocks are provided by the module.
 */
function dsawm_custom_block_info() {

    $blocks['landing_header'] = array(
        // info: The name of the block.
        'info' => t('Resource Landing Header')

    );
    return $blocks;
}

/**
 * Implements hook_block_configure().
 *
 * This hook declares configuration options for blocks provided by this module.
 */
function dsawm_custom_block_configure($delta = '') {
    $form = array();
    if ($delta == 'landing_header') {

        $form['landing_header_content'] = array(
            '#type' => 'textarea',
            '#title' => t('Block contents'),
            '#size' => 60,
            '#description' => t('This text will appear in the landing header.'),
            '#default_value' => variable_get('landing_header_content', t('<h2>Resources</h2>')),
        );
    }
    return $form;
}

/**
 * Implements hook_block_save().
 *
 * This hook declares how the configured options for a block
 * provided by this module are saved.
 */
function dsawm_custom_block_save($delta = '', $edit = array()) {

    if ($delta == 'landing_header') {
        variable_set('landing_header_content', $edit['landing_header_content']);
    }
}

/**
 * Implements hook_block_view().
 *
 * This hook generates the contents of the blocks themselves.
 */
function dsawm_custom_block_view($delta = '') {
    // The $delta parameter tells us which block is being requested.
    switch ($delta) {
        case 'landing_header':
            // The subject is displayed at the top of the block. Note that it
            // should be passed through t() for translation. The title configured
            // for the block using Drupal UI supercedes this one.
            $block['subject'] = t('');
            // The content of the block is typically generated by calling a custom
            // function.
            $block['content'] = dsawm_custom_contents($delta);
            break;
    }
    return $block;
}

function dsawm_custom_contents($delta){

    switch($delta) {
        case 'landing_header' :
            return array('#markup' => variable_get('dsawm_custom_string', t('<h2>Resources</h2>')));
            break;
    }

}